<head>
  <title>xpenz</title>

  <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.0/js/bootstrap.min.js"></script>
  </style>
</head>

<body>
	<div class="container">
		<h1>xpenz</h1>

	  {{#if currentUser}}
	  	{{> expenses}}
	  {{else}}
	 	 	{{> login}}
	  {{/if}}
	</div>
</body>

<!-- Templates  -->

<template name="login">
	{{ loginMessage }}
	<input id="email" type="email" />
	<input id="password" type="password" />
	<button>Login</button>
</template>

<template name="expenses">
	{{#with currentUser}}
		Hi, {{profile.name}}.
	{{/with}}
	
	<h3>your expenses</h3>
	{{> addNewExpense }}

	{{> showExpenses}}
	
</template>

<template name="addNewExpense">
{{ insertError }}
<div class="row">
	{{#autoForm collection=expenses id="insertExpenseForm" type="insert" class="form-inline"}}
		{{> afFieldInput name="date" placeholder="schemaLabel"}}
		{{> afFieldInput name="title" placeholder="schemaLabel"}}
		{{> afFieldInput name="description" placeholder="schemaLabel"}}
		{{> afFieldInput name="type" options="allowed"}}
		<div class="input-group">
		  <span class="input-group-addon">$</span>
		  {{> afFieldInput name="amount" placeholder="schemaLabel" step="0.01" type="number"}}
		</div>

		<button type="submit" class="btn btn-success btn-large">Create</button>
	{{/autoForm}}
</div>
</template>

<template name="showExpenses">
<div class="row">
<table class="table">
	<thead>
		<tr>
			<th>Date</th>
			<th>Type</th>
			<th>Title</th>
			<th>Description</th>
			<th>Amount</th>
			<th>Approved</th>
			<th>Paid</th>
		</tr>
	</thead>
	<tbody>
		{{#each getExpenses}}
			<tr>
				<td>{{date}}</td>
				<td>{{type}}</td>
				<td>{{title}}</td>
				<td>{{description}}</td>
				<td>{{amount}}</td>
				<td>{{#if approved}} yes {{else}} pending {{/if}}</td>
				<td>{{#if paid}} yes {{else}}  {{/if}}</td>
			</tr>
		{{/each}}
	</tbody>
</table>
</div>

</template>
